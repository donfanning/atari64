
	ORG $0000         ;DECLARE 6510 PORTS
D6510	DS.B 1           ;6510 DATA DIRECTION REGISTER
R6510	DS.B 1           ;6510 DATA REGISTER
	ORG $0002         ;MISS 6510 REGS
;VIRTUAL REGS FOR MACHINE LANGUAGE MONITOR
PCH	DS.B 1
PCL	DS.B 1
FLGS	DS.B 1
ACC	DS.B 1
XR	DS.B 1
YR	DS.B 1
SP	DS.B 1
INVH	DS.B 1           ;USER MODIFIABLE IRQ
INVL	DS.B 1

	ORG $90
STATUS	DS.B 1           ;I/O OPERATION STATUS BYTE
; CRFAC DS.B 2 ;CORRECTION FACTOR (UNUSED)
STKEY	DS.B 1           ;STOP KEY FLAG
SVXT	DS.B 1           ;TEMPORARY
VERCK	DS.B 1           ;LOAD OR VERIFY FLAG
C3P0	DS.B 1           ;IEEE BUFFERED CHAR FLAG
BSOUR	DS.B 1           ;CHAR BUFFER FOR IEEE
SYNO	DS.B 1           ;CASSETTE SYNC #
XSAV	DS.B 1           ;TEMP FOR BASIN
LDTND	DS.B 1           ;INDEX TO LOGICAL FILE
DFLTN	DS.B 1           ;DEFAULT INPUT DEVICE #
DFLTO	DS.B 1           ;DEFAULT OUTPUT DEVICE #
PRTY	DS.B 1           ;CASSETTE PARITY
DPSW	DS.B 1           ;CASSETTE DIPOLE SWITCH
MSGFLG	DS.B 1           ;OS MESSAGE FLAG
PTR1	;CASSETTE ERROR PASS1
T1	DS.B 1           ;TEMPORARY 1
TMPC
PTR2	;CASSETTE ERROR PASS2
T2	DS.B 1           ;TEMPORARY 2
TIME	DS.B 3           ;24 HOUR CLOCK IN 1/60TH SECONDS
R2D2	;SERIAL BUS USAGE
PCNTR	DS.B 1           ;CASSETTE STUFF
; PTCH DS.B 1  (UNUSED)
BSOUR1	;TEMP USED BY SERIAL ROUTINE
FIRT	DS.B 1
kCOUNT	;TEMP USED BY SERIAL ROUTINE
CNTDN	DS.B 1           ;CASSETTE SYNC COUNTDOWN
BUFPT	DS.B 1           ;CASSETTE BUFFER POINTER
INBIT	;RS-232 RCVR INPUT BIT STORAGE
SHCNL	DS.B 1           ;CASSETTE SHORT COUNT
BITCI	;RS-232 RCVR BIT COUNT IN
RER	DS.B 1           ;CASSETTE READ ERROR
RINONE	;RS-232 RCVR FLAG FOR START BIT CHECK
REZ	DS.B 1           ;CASSETE READING ZEROES
RIDATA	;RS-232 RCVR BYTE BUFFER
RDFLG	DS.B 1           ;CASSETTE READ MODE
RIPRTY	;RS-232 RCVR PARITY STORAGE
SHCNH	DS.B 1           ;CASSETTE SHORT CNT
SAL	DS.B 1
SAH	DS.B 1
EAL	DS.B 1
EAH	DS.B 1
CMP0	DS.B 1
TEMP	DS.B 1
TAPE1	DS.B 2           ;ADDRESS OF TAPE BUFFER #1Y.
BITTS	;RS-232 TRNS BIT COUNT
SNSW1	DS.B 1
NXTBIT	;RS-232 TRNS NEXT BIT TO BE SENT
DIFF	DS.B 1
RODATA	;RS-232 TRNS BYTE BUFFER
PRP	DS.B 1
FNLEN	DS.B 1           ;LENGTH CURRENT FILE N STR
LA	DS.B 1           ;CURRENT FILE LOGICAL ADDR
SA	DS.B 1           ;CURRENT FILE 2ND ADDR
FA	DS.B 1           ;CURRENT FILE PRIMARY ADDR
FNADR	DS.B 2           ;ADDR CURRENT FILE NAME STR
ROPRTY	;RS-232 TRNS PARITY BUFFER
OCHAR	DS.B 1
FSBLK	DS.B 1           ;CASSETTE READ BLOCK COUNT
MYCH	DS.B 1
CAS1	DS.B 1           ;CASSETTE MANUAL/CONTROLLED SWITCH
TMP0
STAL	DS.B 1
STAH	DS.B 1
MEMUSS	;CASSETTE LOAD TEMPS (2 BYTES)
TMP2	DS.B 2
;
;VARIABLES FOR SCREEN EDITOR
;
LSTX	DS.B 1           ;KEY SCAN INDEX
; SFST DS.B 1 ;KEYBOARD SHIFT FLAG (UNUSED)
NDX	DS.B 1           ;INDEX TO KEYBOARD Q
RVS	DS.B 1           ;RVS FIELD ON FLAG
INDX	DS.B 1
LSXP	DS.B 1           ;X POS AT START
LSTP	DS.B 1
SFDX	DS.B 1           ;SHIFT MODE ON PRINT
BLNSW	DS.B 1           ;CURSOR BLINK ENAB
BLNCT	DS.B 1           ;COUNT TO TOGGLE CUR
GDBLN	DS.B 1           ;CHAR BEFORE CURSOR
BLNON	DS.B 1           ;ON/OFF BLINK FLAG
CRSW	DS.B 1           ;INPUT VS GET FLAG
PNT	DS.B 2           ;POINTER TO ROW
; POINT DS.B 1   (UNUSED)
PNTR	DS.B 1           ;POINTER TO COLUMN
QTSW	DS.B 1           ;QUOTE SWITCH
LNMX	DS.B 1           ;40/80 MAX POSITON
TBLX	DS.B 1
DATA	DS.B 1
INSRT	DS.B 1           ;INSERT MODE FLAG
LDTB1	DS.B 26          ;LINE FLAGS+ENDSPACE
USER	DS.B 2           ;no longer needed without color
KEYTAB	DS.B 2           ;KEYSCAN TABLE INDIRECT
;RS-232 Z-PAGE
RIBUF	DS.B 2           ;RS-232 INPUT BUFFER POINTER
ROBUF	DS.B 2           ;RS-232 OUTPUT BUFFER POINTER
FREKZP	DS.B 4           ;FREE KERNAL ZERO PAGE 9/24/80
BASZPT	DS.B 1           ;LOCATION ($00FF) USED BY BASIC

	ORG $100 
BAD	DS.B 1
	ORG $200
BUF	DS.B 89          ;BASIC/MONITOR BUFFER

; TABLES FOR OPEN FILES
;
LAT	DS.B 10          ;LOGICAL FILE NUMBERS
FAT	DS.B 10          ;PRIMARY DEVICE NUMBERS
SAT	DS.B 10          ;SECONDARY ADDRESSES

; SYSTEM STORAGE
;
KEYD	DS.B 10          ;IRQ KEYBOARD BUFFER
MEMSTR	DS.B 2           ;START OF MEMORY
kMEMSIZ	DS.B 2           ;TOP OF MEMORY
TIMOUT	DS.B 1           ;IEEE TIMEOUT FLAG

; SCREEN EDITOR STORAGE
;
COLOR	DS.B 1           ;ACTIV COLOR NYBBLE
GDCOL	DS.B 1           ;ORIGINAL COLOR BEFORE CURSOR
HIBASE	DS.B 1           ;BASE LOCATION OF SCREEN (TOP)
XMAX	DS.B 1
RPTFLG	DS.B 1           ;KEY REPEAT FLAG
KOUNT	DS.B 1
DELAY	DS.B 1
SHFLAG	DS.B 1           ;SHIFT FLAG BYTE
LSTSHF	DS.B 1           ;LAST SHIFT PATTERN
KEYLOG	DS.B 2           ;INDIRECT FOR KEYBOARD TABLE SETUP
MODE	DS.B 1           ;0-PET MODE, 1-CATTACANNA
AUTODN	DS.B 1           ;AUTO SCROLL DOWN FLAG(= 0 ON,<>0 OFF)

; RS-232 STORAGE
;
M51CTR	DS.B 1           ;6551 CONTROL REGISTER
M51CDR	DS.B 1           ;6551 COMMAND REGISTER
M51AJB	DS.B 2           ;NON STANDARD (BITTIME/2-100)
RSSTAT	DS.B 1           ; RS-232 STATUS REGISTER
BITNUM	DS.B 1           ;NUMBER OF BITS TO SEND (FAST RESPONSE)
BAUDOF	DS.B 2           ;BAUD RATE FULL BIT TIME (CREATED BY OPEN)
;
; RECIEVER STORAGE
;
; INBIT DS.B 1 ;INPUT BIT STORAGE
; BITCI DS.B 1 ;BIT COUNT IN
; RINONE DS.B 1 ;FLAG FOR START BIT CHECK
; RIDATA DS.B 1 ;BYTE IN BUFFER
; RIPRTY DS.B 1 ;BYTE IN PARITY STORAGE
RIDBE	DS.B 1           ;INPUT BUFFER INDEX TO END
RIDBS	DS.B 1           ;INPUT BUFFER POINTER TO START
;
; TRANSMITTER STORAGE
;
; BITTS DS.B 1 ;# OF BITS TO BE SENT
; NXTBIT DS.B 1 ;NEXT BIT TO BE SENT
; ROPRTY DS.B 1 ;PARITY OF BYTE SENT
; RODATA DS.B 1 ;BYTE BUFFER OUT
RODBS	DS.B 1           ;OUTPUT BUFFER INDEX TO START
RODBE	DS.B 1           ;OUTPUT BUFFER INDEX TO END
;
IRQTMP	DS.B 2           ;HOLDS IRQ DURING TAPE OPS
;
; TEMP SPACE FOR VIC-40 VARIABLES ****
;
ENABL	DS.B 1           ;RS-232 ENABLES (REPLACES IER)
CASTON	DS.B 1           ;TOD SENSE DURING CASSETTES
KIKA26	DS.B 1           ;TEMP STORAGE FOR CASSETTE READ ROUTINE
STUPID	DS.B 1           ;TEMP D1IRQ INDICATOR FOR CASSETTE READ
LINTMP	DS.B 1           ;TEMPORARY FOR LINE INDEX
PALNTS	DS.B 1           ;PAL VS NTSC FLAG 0= NTSC 1=PAL

	ORG $0300         ;REM PROGRAM INDIRECTS(10)
	ORG $0300+20      ;REM KERNAL/OS INDIRECTS(20)
CINV	DS.B 2           ;IRQ RAM VECTOR
CBINV	DS.B 2           ;BRK INSTR RAM VECTOR
NMINV	DS.B 2           ;NMI RAM VECTOR
IOPEN	DS.B 2           ;INDIRECTS FOR CODE
ICLOSE	DS.B 2           ; CONFORMS TO KERNAL SPEC 8/19/80
ICHKIN	DS.B 2
ICKOUT	DS.B 2
ICLRCH	DS.B 2
IBASIN	DS.B 2
IBSOUT	DS.B 2
ISTOP	DS.B 2
IGETIN	DS.B 2
ICLALL	DS.B 2
USRCMD	DS.B 2
ILOAD	DS.B 2
ISAVE	DS.B 2           ;SAVESP

	ORG $0300+60
TBUFFR	DS.B 192         ;CASSETTE DATA BUFFER
; four extra bytes to play with
CHSHADOW	DS.B 1	; Character set shadow register
ATARITHING	DS.B 1	; next Atari thing I need

	ORG $400
VICSCN	DS.B 1024
RAMLOC

; ATARI I/O DEVICES

GTIAREG  = $D000
PRIOR    = $D01B
CONSOL   = $D01F
POKEYREG = $D200
AUDCTL   = $D208
KBCODE   = $D209
RANDOM   = $D20A
IRQST    = $D20E   ;b7=break
IRQEN    = IRQST
SKSTAT   = $D20F  ; b3=key b4=shift
SKCTLS   = SKSTAT ; serial port 4 key control
SKCTL    = SKCTLS
ANTICREG = $D400
DMACTL   = $D400
CHACTL   = $D401
DLISTL   = $D402
DLISTH   = $D403
CHBASE   = $D409
VCOUNT   = $D40B  ; Returns half the value of the vertical line counter
NMIEN    = $D40E  ; b7 = DLIs, B6 = vertical blank, b5=reset
NMIST	= $D40F  
NMIRES	= $D40F  

; C64 I/O DEVICES deprecated
;
VICREG	= $D000

SIDREG	= $D400

VICCOL	= $D800

	ORG $DC00        ;DEVICE1 6526 (PAGE1 IRQ)
D1PRA	DS.B 1
D1PRB	DS.B 1
D1DDRA	DS.B 1
D1DDRB	DS.B 1
D1T1L	DS.B 1
D1T1H	DS.B 1
D1T2L	DS.B 1
D1T2H	DS.B 1
D1TOD1	DS.B 1
D1TODS	DS.B 1
D1TODM	DS.B 1
D1TODH	DS.B 1
D1SDR	DS.B 1
D1ICR	DS.B 1
D1CRA	DS.B 1
D1CRB	DS.B 1

	ORG $DD00        ;DEVICE2 6526 (PAGE2 NMI)
D2PRA	DS.B 1
D2PRB	DS.B 1
D2DDRA	DS.B 1
D2DDRB	DS.B 1
D2T1L	DS.B 1
D2T1H	DS.B 1
D2T2L	DS.B 1
D2T2H	DS.B 1
D2TOD1	DS.B 1
D2TODS	DS.B 1
D2TODM	DS.B 1
D2TODH	DS.B 1
D2SDR	DS.B 1
D2ICR	DS.B 1
D2CRA	DS.B 1
D2CRB	DS.B 1

TIMRB	= $19            ;6526 CRB ENABLE ONE-SHOT TB

;TAPE BLOCK TYPES
;
EOT	= 5 ;END OF TAPE
BLF	= 1 ;BASIC LOAD FILE
BDF	= 2 ;BASIC DATA FILE
PLF	= 3 ;FIXED PROGRAM TYPE
BDFH	= 4 ;BASIC DATA FILE HEADER
BUFSZ	= 192            ;BUFFER SIZE
;
;SCREEN EDITOR CONSTANTS
;
LLEN	= 40             ;SINGLE LINE 40 COLUMNS
LLEN2	= 80             ;DOUBLE LINE = 80 COLUMNS
NLINES	= 25             ;25 ROWS ON SCREEN
WHITE	= $01            ;WHITE SCREEN COLOR
BLUE	= $06            ;BLUE CHAR COLOR
CR	= $D             ;CARRIAGE RETURN

;RSR 8/3/80 ADD & CHANGE Z-PAGE
;RSR 8/11/80 ADD MEMUSS & PLF TYPE
;RSR 8/22/80 ADD RS-232 ROUTINES
;RSR 8/24/80 ADD OPEN VARIABLES
;RSR 8/29/80 ADD BAUD SPACE MOVE RS232 TO Z-PAGE
;RSR 9/2/80 ADD SCREEN EDITOR VARS&CON
;RSR 12/7/81 MODIFY FOR VIC-40
